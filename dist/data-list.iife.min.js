(()=>{var h=class d extends HTMLElement{static baseVersion="2025-06-01";static _iCount=0;uib=!!window.uibuilder;uibuilder=window.uibuilder;$;$$;connected=!1;name;opts={};static get version(){return`${this.componentVersion} (Base: ${this.baseVersion})`}constructor(){super()}config(t){return t&&(this.opts=d.deepAssign(this.opts,t)),this.opts}createShadowSelectors(){this.$=this.shadowRoot?.querySelector.bind(this.shadowRoot),this.$$=this.shadowRoot?.querySelectorAll.bind(this.shadowRoot)}static deepAssign(t,...e){for(let s of e)for(let i in s){let r=s[i],n=t[i];if(Object(r)==r&&Object(n)===n){t[i]=d.deepAssign(n,r);continue}t[i]=s[i]}return t}async doInheritStyles(){if(!this.shadowRoot||!this.hasAttribute("inherit-style"))return;let t=this.getAttribute("inherit-style");t||(t="./index.css");let e=document.createElement("link");e.setAttribute("type","text/css"),e.setAttribute("rel","stylesheet"),e.setAttribute("href",t),this.shadowRoot.appendChild(e),console.info(`[${this.localName}] Inherit-style requested. Loading: "${t}"`)}ensureId(){this.uib=!!window.uibuilder,this.id||(this.id=`${this.localName}-${++this.constructor._iCount}`)}prependStylesheet(t,e=0){if(!t)throw new Error(`[${this.localName}] cssText must be provided`);let s=this._findExistingStylesheet();if(s)return s;let i=document.createElement("style");return i.textContent=t,i.setAttribute("data-component",this.localName),i.setAttribute("data-order",e.toString()),this._prependToDocumentHead(i,e),i}uibSend(t,e){this.uib&&(this.uibuilder.ioConnected?this.uibuilder.send({topic:`${this.localName}:${t}`,payload:e,id:this.id,name:this.name}):console.warn(`[${this.localName}] uibuilder not connected to server, cannot send:`,t,e))}_connect(){this.ensureId(),this.doInheritStyles(),this.uib&&this.uibuilder.onTopic(`${this.localName}::${this.id}`,this._uibMsgHandler.bind(this))}_construct(t,e){t&&(e||(e={mode:"open",delegatesFocus:!0}),this.attachShadow(e).append(t),this.createShadowSelectors())}_disconnect(){document.removeEventListener(`uibuilder:msg:_ui:update:${this.id}`,this._uibMsgHandler),this._event("disconnected")}_event(t,e){this.dispatchEvent(new CustomEvent(`${this.localName}:${t}`,{bubbles:!0,composed:!0,detail:{id:this.id,name:this.name,data:e}}))}_ready(){this.connected=!0,this._event("connected"),this._event("ready")}_uibMsgHandler(t){if(typeof t.payload!="object"){console.warn(`[${this.localName}] Ignoring msg, payload is not an object:`,t);return}Object.keys(t.payload).forEach(e=>{e.startsWith("_")||(this[e]=t.payload[e])})}_findExistingStylesheet(){return document.head.querySelector(`style[data-component="${this.localName}"]`)}_prependToDocumentHead(t,e){let s=document.head,i=Array.from(s.querySelectorAll("style[data-component]"));if(i.length===0){let n=s.firstChild;n?s.insertBefore(t,n):s.appendChild(t);return}let r=null;for(let n of i){let a=parseInt(n.getAttribute("data-order")??"0",10);if(e<a){r=n;break}}if(r)s.insertBefore(t,r);else{let a=i[i.length-1].nextSibling;a?s.insertBefore(t,a):s.appendChild(t)}}},p=h;var f=`
        data-list {
            --list-style: disc; /* Default list style type */
            --nested-indent: 40px; /* Default nested list indent - all browsers use 40px by default */
        }
        data-list ul {
            list-style: var(--list-style);
        }
        /* Nested list indentation */
        data-list ul ul {
            padding-inline-start: var(--nested-indent);
            margin-inline-start: 0;
        }
        data-list .nested-container {
            /* No list bullet on an li containing a nested lists unless the key text is shown */
            list-style: none;
        }
`,l=class extends p{static componentVersion="2025-05-31";#t=null;#s=null;#e=null;#i="ul";listvar=null;keyvalueseparator=" :: ";static get observedAttributes(){return["inherit-style","name","keyvalueseparator","liststyle","listvar","type","topic"]}constructor(){super(),this.prependStylesheet(f)}connectedCallback(){if(this._connect(),this.listvar&&window[this.listvar]){window[this.listvar]?this.data=window[this.listvar]:console.warn(`[DataList] ${this.id} window.${this.listvar} does not exist, ignoring.`);return}this._ready()}disconnectedCallback(){this._disconnect()}attributeChangedCallback(t,e,s){e!==s&&(this[t]=s,this._event("attribChanged",{attribute:t,newVal:s,oldVal:e}))}updateListAttributes(t,e){t&&(t&&(t.setAttribute("data-list-type",e),e==="ol"?(this.listStyle="decimal",t.setAttribute("aria-label","Ordered list")):(this.listStyle="disc",t.setAttribute("aria-label","Unordered list"))),this.#s&&t.style.setProperty("--list-style",this.#s))}set type(t){["ul","ol"].includes(t)||(console.warn(`[DataList] ${this.id} Invalid type "${t}" specified, defaulting to "ul".`),t="ul"),this.#i=t,this.updateListAttributes(this.#t,this.#i)}get type(){return this.#i}set liststyle(t){this.#s=t,this.updateListAttributes(this.#t,this.#i)}get liststyle(){return this.#s}set data(t){this.#e=t,this.#t&&this.#t.remove(),this.buildList(this.#e,this,this.#i,1),this.#t=this.querySelector("ul"),this.updateListAttributes(this.#t,this.#i),this._event("dataChanged",this.#e)}get data(){return this.#e}entry(t,e){this.#e[t]=e,this.data=this.#e}buildList(t,e,s,i){i===void 0&&(i=1);let r=document.createElement("ul");i>1&&(r.classList.add("nested-list"),r.setAttribute("data-depth",i.toString())),Object.entries(t).forEach(([n,a],u)=>{let b=!isNaN(parseInt(n));if(typeof a=="object"&&a!==null){if(i>3){r.insertAdjacentHTML("beforeend",this.buildLIhtml({arrayType:Array.isArray(t),key:n,value:JSON.stringify(a),i:u})),console.warn(`[DataList] ${this.id} buildList: Depth limit reached for key "${n}", showing as string.`);return}let o=document.createElement("li");if(!b&&this.keyvalueseparator!=="NULL"){let c=document.createElement("span");c.textContent=`${n}${this.keyvalueseparator}`,o.appendChild(c)}else o.classList.add("nested-container");this.buildList(a,o,s,++i),this.updateListAttributes(o,s),r.appendChild(o)}else r.insertAdjacentHTML("beforeend",this.buildLIhtml({arrayType:Array.isArray(t),key:n,value:a,i:u}))}),e.appendChild(r)}buildLIhtml({arrayType:t,key:e,value:s,i}){return t?`<li id="${this.id}-${e}" data-index="${i}">${s}</li>`:`<li id="${this.id}-${e}" data-index="${i}">${this.keyvalueseparator==="NULL"?"":`${e}${this.keyvalueseparator}`}${s}</li>`}},$=l;window.DataList=l;customElements.define("data-list",l);})();
//# sourceMappingURL=data-list.iife.min.js.map
