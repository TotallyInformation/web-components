(()=>{var d=class c extends HTMLElement{static baseVersion="2025-09-19";static _iCount=0;uib=!!window.uibuilder;uibuilder=window.uibuilder;$;$$;connected=!1;name;opts={};static get version(){return`${this.componentVersion} (Base: ${this.baseVersion})`}constructor(){super()}config(t){return t&&(this.opts=c.deepAssign(this.opts,t)),this.opts}createShadowSelectors(){this.$=this.shadowRoot?.querySelector.bind(this.shadowRoot),this.$$=this.shadowRoot?.querySelectorAll.bind(this.shadowRoot)}static deepAssign(t,...e){for(let s of e)for(let i in s){let o=s[i],n=t[i];if(Object(o)==o&&Object(n)===n){t[i]=c.deepAssign(n,o);continue}t[i]=s[i]}return t}async doInheritStyles(){if(!this.shadowRoot||!this.hasAttribute("inherit-style"))return;let t=this.getAttribute("inherit-style");t||(t="./index.css");let e=document.createElement("link");e.setAttribute("type","text/css"),e.setAttribute("rel","stylesheet"),e.setAttribute("href",t),this.shadowRoot.appendChild(e),console.info(`[${this.localName}] Inherit-style requested. Loading: "${t}"`)}ensureId(){this.uib=!!window.uibuilder,this.id||(this.id=`${this.localName}-${++this.constructor._iCount}`)}hasSlotContent(){return this.shadowRoot.querySelector("slot").assignedNodes().some(s=>s.nodeType===Node.ELEMENT_NODE?!0:s.nodeType===Node.TEXT_NODE?s.textContent.trim().length>0:!1)}prependStylesheet(t,e=0){if(!t)throw new Error(`[${this.localName}] cssText must be provided`);let s=this._findExistingStylesheet();if(s)return s;let i=document.createElement("style");return i.textContent=t,i.setAttribute("data-component",this.localName),i.setAttribute("data-order",e.toString()),this._prependToDocumentHead(i,e),i}uibSend(t,e){this.uib&&(this.uibuilder.ioConnected?this.uibuilder.send({topic:`${this.localName}:${t}`,payload:e,id:this.id,name:this.name}):console.warn(`[${this.localName}] uibuilder not connected to server, cannot send:`,t,e))}_connect(){this.ensureId(),this.doInheritStyles(),this.uib&&this.uibuilder.onTopic(`${this.localName}::${this.id}`,this._uibMsgHandler.bind(this))}_construct(t,e){t&&(e||(e={mode:"open",delegatesFocus:!0}),this.attachShadow(e).append(t),this.createShadowSelectors())}_disconnect(){document.removeEventListener(`uibuilder:msg:_ui:update:${this.id}`,this._uibMsgHandler),this._event("disconnected")}_event(t,e){this.dispatchEvent(new CustomEvent(`${this.localName}:${t}`,{bubbles:!0,composed:!0,detail:{id:this.id,name:this.name,data:e}}))}_ready(){this.connected=!0,this._event("connected"),this._event("ready")}_uibMsgHandler(t){if(typeof t.payload!="object"){console.warn(`[${this.localName}] Ignoring msg, payload is not an object:`,t);return}Object.keys(t.payload).forEach(e=>{e.startsWith("_")||(this[e]=t.payload[e])})}_findExistingStylesheet(){return document.head.querySelector(`style[data-component="${this.localName}"]`)}_prependToDocumentHead(t,e){let s=document.head,i=Array.from(s.querySelectorAll("style[data-component]"));if(i.length===0){let n=s.firstChild;n?s.insertBefore(t,n):s.appendChild(t);return}let o=null;for(let n of i){let l=parseInt(n.getAttribute("data-order")??"0",10);if(e<l){o=n;break}}if(o)s.insertBefore(t,o);else{let l=i[i.length-1].nextSibling;l?s.insertBefore(t,l):s.appendChild(t)}}},h=d;var a=document.createElement("template");a.innerHTML=`
    <style>
        :host {
            display: block;   /* default is inline */
            contain: content; /* performance boost */
        }
        pre {
            font-family: Consolas, "ui-monospace", "Lucida Console", monospace;
            white-space: pre;
            margin: 0;
        }
        .key {color:#ffbf35}
        .string {color:#5dff39;}
        .number {color:#70aeff;}
        .boolean {color:#b993ff;}
        .null {color:#93ffe4;}
        .undefined {color:#ff93c9;}
    </style>
    <slot></slot>
    <inner-load></inner-load>
`;var r=class extends h{static componentVersion="2025-02-25";static get observedAttributes(){return["inherit-style","name","src"]}contentType="text";text="";json={};get src(){return this.getAttribute("src")}set src(t){this.setAttribute("src",t)}constructor(){super(),a&&a.content&&this._construct(a.content.cloneNode(!0))}connectedCallback(){this._connect(),this._ready()}disconnectedCallback(){this._disconnect()}attributeChangedCallback(t,e,s){e!==s&&(this[t]=s,t==="src"&&(s?this.doInclude(s):console.error("[html-include] src attribute cannot be empty.")),this._event("attribChanged",{attribute:t,newVal:s,oldVal:e}))}async doInclude(t){if(!t){console.error("[html-include] Cannot fetch empty string.");return}let e=await fetch(t);if(!e.ok)throw new Error(`[html-include] Fetch of url "${t}" failed: ${e.statusText}`);let s=e.headers.get("content-type");switch(s&&(s.includes("text/html")?this.contentType="html":s.includes("application/json")?this.contentType="json":s.includes("multipart/form-data")?this.contentType="form":this.contentType="text"),this.contentType){case"html":{this.json={},this.text=await e.text();let o=new DOMParser().parseFromString(this.text,"text/html");this.shadowRoot.removeChild(this.shadowRoot.lastElementChild),this.shadowRoot.appendChild(o.body);break}case"json":{this.json=await e.json(),this.text=JSON.stringify(this.json,null,2),this.shadowRoot.removeChild(this.shadowRoot.lastElementChild),this.shadowRoot.appendChild(this.constructor.highlight(this.text));break}case"form":{this.json=await e.formData(),this.text=JSON.stringify(this.json),this.shadowRoot.removeChild(this.shadowRoot.lastElementChild),this.shadowRoot.append(this.text);break}case"text":default:{this.json={},this.text=await e.text(),this.shadowRoot.append(this.text);break}}this._event("content-loaded",{url:t,contentType:this.contentType,text:this.text,json:this.json})}static highlight(t){t=t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),t=t.replace(/("(\\u[a-zA-Z0-9]{4}|\\[^u]|[^\\"])*"(\s*:)?|\b(true|false|null)\b|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?)/g,function(s){let i="number";return/^"/.test(s)?/:$/.test(s)?i="key":i="string":/true|false/.test(s)?i="boolean":/null/.test(s)&&(i="null"),'<span class="'+i+'">'+s+"</span>"});let e=document.createElement("pre");return e.innerHTML=t,e}},p=r;window.HtmlInclude=r;customElements.define("html-include",r);})();
//# sourceMappingURL=html-include.iife.min.js.map
