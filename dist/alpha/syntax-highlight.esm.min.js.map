{
  "version": 3,
  "sources": ["../../alpha/syntax-highlight.js"],
  "sourcesContent": ["/** Zero dependency web component to show a JavaScript object as a highlighted box in the UI\n * Use with uibuilder as:\n *   @example html\n *     <!-- Shows the last incoming msg from Node-RED -->\n *     <syntax-highlight auto=\"msg\">\u21C7 Latest msg from Node-RED:</syntax-highlight>\n *     <!-- Shows the last outgoing msg to Node-RED -->\n *     <!-- <syntax-highlight auto=\"sentMsg\">\u21C9 Latest msg to Node-RED:</syntax-highlight> -->\n *     <!-- Shows the last incoming control msg from Node-RED -->\n *     <!-- <syntax-highlight auto=\"ctrl\">\u21D0 Latest control msg from Node-RED:</syntax-highlight> -->\n *     <!-- Shows the last outgoing control msg to Node-RED -->\n *     <!-- <syntax-highlight auto=\"sentCtrlMsg\">\u21D2 Latest control msg to Node-RED:</syntax-highlight> -->\n *   @example JavaScript\n *     import('./syntax-highlight')\n * Or use as\n * @example HTML:\n *   <syntax-highlight>Latest msg from Node-RED:</syntax-highlight>\n * @example JavaScript:\n *   const {dumpObject} = await import('./components/syntax-highlight.js')\n *   dumpObject(msg)\n * @example Alternative JavaScript:\n *   await import('./components/syntax-highlight.js')\n *   document.getElementsByTagName('syntax-highlight')[0].json = msg\n * @example Other update methods\n *   const showMsg = document.getElementsByTagName('syntax-highlight')[0]\n *   showMsg.dispatchEvent(new CustomEvent('new-msg', { bubbles: false, detail: msg }))\n *   showMsg.evt('new-msg', msg)\n * \n */\n/*\n  Copyright (c) 2022 Julian Knight (Totally Information)\n\n  Licensed under the Apache License, Version 2.0 (the \"License\");\n  you may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n  http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n*/\n\nconst template = document.createElement('template')\ntemplate.innerHTML = `\n    <style>\n        :host {\n            display: block;\n            color:white;\n            background-color:black;\n            margin-top: 0.5rem;\n            margin-bottom: 0.5rem;\n            padding: 0.5rem;\n        }\n        pre {\n            font-family: Consolas, \"ui-monospace\", \"Lucida Console\", monospace;\n            white-space: pre;\n            margin: 0;\n        }\n        .key {color:#ffbf35}\n        .string {color:#5dff39;}\n        .number {color:#70aeff;}\n        .boolean {color:#b993ff;}\n        .null {color:#93ffe4;}\n        .undefined {color:#ff93c9;}\n    </style>\n    <slot></slot>\n    <pre><i>No data</i></pre>\n`\n\n// return formatted HTML version of JSON object\nconst returnHighlight = function (json) {\n    json = JSON.stringify(json, undefined, 4)\n    json = json.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;')\n    json = json.replace(/(\"(\\\\u[a-zA-Z0-9]{4}|\\\\[^u]|[^\\\\\"])*\"(\\s*:)?|\\b(true|false|null)\\b|-?\\d+(?:\\.\\d*)?(?:[eE][+\\-]?\\d+)?)/g, function (match) {\n        var cls = 'number'\n        if ((/^\"/).test(match)) {\n            if ((/:$/).test(match)) {\n                cls = 'key'\n            } else {\n                cls = 'string'\n            }\n        } else if ((/true|false/).test(match)) {\n            cls = 'boolean'\n        } else if ((/null/).test(match)) {\n            cls = 'null'\n        }\n        return '<span class=\"' + cls + '\">' + match + '</span>'\n    })\n    const myHtml = document.createElement('pre')\n    myHtml.innerHTML = json\n    return myHtml\n} // --- End of syntaxHighlight --- //\n\nexport default class SyntaxHighlight extends HTMLElement {\n\n    constructor() {\n        super()\n        this.attachShadow({ mode: 'open', delegatesFocus: true })\n            .append(template.content.cloneNode(true))\n\n        this.addEventListener('new-msg', evt => {\n            this.json = evt.detail\n        })\n\n        // Get a reference to the uibuilder FE client library if possible\n        try {\n            this.uibuilder = window.uibuilder\n        } catch (e) {\n            this.uibuilder = undefined\n        }\n    }\n\n    set json(value) {\n        //console.log(value, syntaxHighlight(value))\n        this.shadowRoot.removeChild(this.shadowRoot.lastElementChild)\n        this.shadowRoot.appendChild(returnHighlight(value))\n    }\n\n    evt(evtName, evtData) {\n        this.dispatchEvent(new CustomEvent(evtName, { bubbles: false, detail: evtData }))\n    }\n\n    static get observedAttributes() { return [\n        'auto', \n    ]}\n\n    attributeChangedCallback(name, oldVal, newVal) {\n        if ( oldVal === newVal ) return\n\n        // auto attrib allows msgs to/from Node-RED to be shown as long as window.uibuilder is available\n        if ( name === 'auto' && this.uibuilder ) {\n            switch (newVal) {\n                case 'message':\n                case 'msg': {\n                    this.uibuilder.onChange('msg', (msg)=> {\n                        this.json = msg\n                    })\n                    break\n                }\n\n                case 'ctrl':\n                case 'control':\n                case 'ctrlMsg': {\n                    this.uibuilder.onChange('ctrlMsg', (msg)=> {\n                        this.json = msg\n                    })\n                    break\n                }\n\n                case 'sent':\n                case 'sentmsg':\n                case 'sentMsg': {\n                    this.uibuilder.onChange('sentMsg', (msg)=> {\n                        this.json = msg\n                    })\n                    break\n                }\n\n                case 'sentctrlmsg':\n                case 'sentCtrlMsg': {\n                    this.uibuilder.onChange('sentCtrlMsg', (msg)=> {\n                        this.json = msg\n                    })\n                    break\n                }\n\n                default: {\n                    break\n                }\n            } // -- end of switch --\n        } // -- end of if name=auto --\n        \n    } // --- end of attributeChangedCallback --- //\n\n} // ---- End of SyntaxHighlight class definition ---- //\n\n// Add the class as a new Custom Element to the window object\ncustomElements.define('syntax-highlight', SyntaxHighlight)\n\n// document.addEventListener('new-msg', evt => {\n//     console.log('GOT A MSG', evt)\n// })\n\n/** Quick and dirty method to dump a JavaScript object to the ui\n * Will put the output to the first <syntax-highlight> tag on the page\n * @param {*} obj Object to dump\n * @param {number} [ref] Optional, default=0. Which tag to use? If >1 <syntax-highlight> tag is on the page.\n */\nexport const dumpObject = function showJson(obj, ref = 0) {\n    try {\n        const showMsg = document.getElementsByTagName('syntax-highlight')[ref]\n        showMsg.json = obj\n    } catch (e) {\n        console.error('[syntax-highlight:dumpObject] Cannot show object - is there a <syntax-highlight> tag?')\n    }\n}\n\n// Consider using a std to expose default functionality for a component\nexport const syntaxHighlight = dumpObject"],
  "mappings": "AA4CA,IAAMA,EAAW,SAAS,cAAc,UAAU,EAClDA,EAAS,UAAY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EA2BrB,IAAMC,EAAkB,SAAUC,EAAM,CACpCA,EAAO,KAAK,UAAUA,EAAM,OAAW,CAAC,EACxCA,EAAOA,EAAK,QAAQ,KAAM,OAAO,EAAE,QAAQ,KAAM,MAAM,EAAE,QAAQ,KAAM,MAAM,EAC7EA,EAAOA,EAAK,QAAQ,yGAA0G,SAAUC,EAAO,CAC3I,IAAIC,EAAM,SACV,MAAK,KAAM,KAAKD,CAAK,EACZ,KAAM,KAAKA,CAAK,EACjBC,EAAM,MAENA,EAAM,SAEF,aAAc,KAAKD,CAAK,EAChCC,EAAM,UACE,OAAQ,KAAKD,CAAK,IAC1BC,EAAM,QAEH,gBAAkBA,EAAM,KAAOD,EAAQ,SAClD,CAAC,EACD,IAAME,EAAS,SAAS,cAAc,KAAK,EAC3C,OAAAA,EAAO,UAAYH,EACZG,CACX,EAEqBC,EAArB,cAA6C,WAAY,CAErD,aAAc,CACV,MAAM,EACN,KAAK,aAAa,CAAE,KAAM,OAAQ,eAAgB,EAAK,CAAC,EACnD,OAAON,EAAS,QAAQ,UAAU,EAAI,CAAC,EAE5C,KAAK,iBAAiB,UAAWO,GAAO,CACpC,KAAK,KAAOA,EAAI,MACpB,CAAC,EAGD,GAAI,CACA,KAAK,UAAY,OAAO,SAC5B,MAAY,CACR,KAAK,UAAY,MACrB,CACJ,CAEA,IAAI,KAAKC,EAAO,CAEZ,KAAK,WAAW,YAAY,KAAK,WAAW,gBAAgB,EAC5D,KAAK,WAAW,YAAYP,EAAgBO,CAAK,CAAC,CACtD,CAEA,IAAIC,EAASC,EAAS,CAClB,KAAK,cAAc,IAAI,YAAYD,EAAS,CAAE,QAAS,GAAO,OAAQC,CAAQ,CAAC,CAAC,CACpF,CAEA,WAAW,oBAAqB,CAAE,MAAO,CACrC,MACJ,CAAC,CAED,yBAAyBC,EAAMC,EAAQC,EAAQ,CAC3C,GAAKD,IAAWC,GAGXF,IAAS,QAAU,KAAK,UACzB,OAAQE,EAAQ,CACZ,IAAK,UACL,IAAK,MAAO,CACR,KAAK,UAAU,SAAS,MAAQC,GAAO,CACnC,KAAK,KAAOA,CAChB,CAAC,EACD,KACJ,CAEA,IAAK,OACL,IAAK,UACL,IAAK,UAAW,CACZ,KAAK,UAAU,SAAS,UAAYA,GAAO,CACvC,KAAK,KAAOA,CAChB,CAAC,EACD,KACJ,CAEA,IAAK,OACL,IAAK,UACL,IAAK,UAAW,CACZ,KAAK,UAAU,SAAS,UAAYA,GAAO,CACvC,KAAK,KAAOA,CAChB,CAAC,EACD,KACJ,CAEA,IAAK,cACL,IAAK,cAAe,CAChB,KAAK,UAAU,SAAS,cAAgBA,GAAO,CAC3C,KAAK,KAAOA,CAChB,CAAC,EACD,KACJ,CAEA,QACI,KAER,CAGR,CAEJ,EAGA,eAAe,OAAO,mBAAoBR,CAAe,EAWlD,IAAMS,EAAa,SAAkBC,EAAKC,EAAM,EAAG,CACtD,GAAI,CACA,IAAMC,EAAU,SAAS,qBAAqB,kBAAkB,EAAED,CAAG,EACrEC,EAAQ,KAAOF,CACnB,MAAY,CACR,QAAQ,MAAM,uFAAuF,CACzG,CACJ,EAGaG,EAAkBJ",
  "names": ["template", "returnHighlight", "json", "match", "cls", "myHtml", "SyntaxHighlight", "evt", "value", "evtName", "evtData", "name", "oldVal", "newVal", "msg", "dumpObject", "obj", "ref", "showMsg", "syntaxHighlight"]
}
