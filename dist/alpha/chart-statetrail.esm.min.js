var c=class r extends HTMLElement{static baseVersion="2025-01-13";static _iCount=0;uib=!!window.uibuilder;uibuilder=window.uibuilder;$;$$;connected=!1;name;opts={};static get version(){return`${this.componentVersion} (Base: ${this.baseVersion})`}constructor(){super()}async doInheritStyles(){if(!this.hasAttribute("inherit-style"))return;let t=this.getAttribute("inherit-style");t||(t="./index.css");let e=document.createElement("link");e.setAttribute("type","text/css"),e.setAttribute("rel","stylesheet"),e.setAttribute("href",t),this.shadowRoot.appendChild(e),console.info(`[${this.localName}] Inherit-style requested. Loading: "${t}"`)}config(t){return t&&(this.opts=r.deepAssign(this.opts,t)),this.opts}static deepAssign(t,...e){for(let i of e)for(let s in i){let n=i[s],o=t[s];if(Object(n)==n&&Object(o)===o){t[s]=r.deepAssign(o,n);continue}t[s]=i[s]}return t}ensureId(){this.uib=!!window.uibuilder,this.id||(this.id=`${this.localName}-${++this.constructor._iCount}`)}createShadowSelectors(){this.$=this.shadowRoot?.querySelector.bind(this.shadowRoot),this.$$=this.shadowRoot?.querySelectorAll.bind(this.shadowRoot)}_uibMsgHandler(t){if(typeof t.payload!="object"){console.warn(`[${this.localName}] Ignoring msg, payload is not an object:`,t);return}Object.keys(t.payload).forEach(e=>{e.startsWith("_")||(this[e]=t.payload[e])})}_event(t,e){this.dispatchEvent(new CustomEvent(`${this.localName}:${t}`,{bubbles:!0,composed:!0,detail:{id:this.id,name:this.name,data:e}}))}uibSend(t,e){this.uib&&this.uibuilder.send({topic:`${this.localName}:${t}`,payload:e,id:this.id,name:this.name})}_construct(t,e){e||(e={mode:"open",delegatesFocus:!0}),this.attachShadow(e).append(t),this.createShadowSelectors()}_connect(){this.ensureId(),this.doInheritStyles(),this.uib&&this.uibuilder.onTopic(`${this.localName}::${this.id}`,this._uibMsgHandler.bind(this))}_disconnect(){document.removeEventListener(`uibuilder:msg:_ui:update:${this.id}`,this._uibMsgHandler),this._event("disconnected")}_ready(){this.connected=!0,this._event("connected"),this._event("ready")}},l=c;var d=document.createElement("template");d.innerHTML=`
    <style>
        :host {
            display: block;   /* default is inline */
            contain: content; /* performance boost */
        }
    </style>
    <slot></slot>
`;var a=class extends l{static componentVersion="2024-12-14";opts={data:{},categoryMap:[{range:[0,.3],title:"Off",color:"var(--failure, red)"},{range:[.3,.6],title:"Partial",color:"var(--warning, #c8b421)"},{range:[.6,1],title:"On",color:"var(--success, green)"}],itemMap:{}};minTime=0;maxTime=0;totalDuration=0;static get observedAttributes(){return["inherit-style","name"]}constructor(){super(),this._construct(d.content.cloneNode(!0))}connectedCallback(){this._connect(),this._ready()}disconnectedCallback(){this._disconnect()}attributeChangedCallback(t,e,i){e!==i&&(this[t]=i,this._event("attribChanged",{attribute:t,newVal:i,oldVal:e}))}updateMinMaxTimestamps(){let t=this.opts.data.flatMap(e=>[new Date(e.startTime),new Date(e.endTime)]);this.minTime=Math.min(...t),this.maxTime=Math.max(...t),this.totalDuration=this.maxTime-this.minTime}createAxisLine(){let t=document.createElement("div");t.className="timeline-axis-container";let e=document.createElement("div");e.className="timeline-axis-title",t.appendChild(e);let i=document.createElement("div");i.className="timeline-axis-line";let s=10;for(let n=0;n<=s;n++){let o=document.createElement("div");o.className="timeline-axis-tick",o.style.left=`${n/s*100}%`;let h=new Date(this.minTime+n/s*this.totalDuration);o.textContent=h.toISOString().substring(11,19),i.appendChild(o)}return t.appendChild(i),t}},p=a;window.ChartStatetrail=a;customElements.define("chart-statetrail",a);export{p as default};
//# sourceMappingURL=chart-statetrail.esm.min.js.map
